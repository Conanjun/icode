<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:foo>
<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>智能客服</title>

	<link rel="stylesheet" href="skin/robotDD/css/minichat.css"/>
	<link href="../assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="skin/robotDD/css/Dang.css" />
	<link rel="stylesheet" href="skin/robotDD/css/robot.css" />
	<link rel="stylesheet" href="skin/robotDD/css/skins/red.css" />
	<link href="../web/common/css/commonCSS.css" rel="stylesheet">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="renderer" content="webkit">
	<script type="text/javascript" src="js/minichat.js" sysNum="1000000"></script>
	<script type="text/javascript" src="http://static.ddimg.cn/js/login/LoginWindow.js?20160913"></script>
	<script type="text/javascript" src="skin/robotDD/js/jquery.twbsPagination.min.js"></script>
	<script type="text/javascript" src="skin/robotDD/js/jquery.slimscroll.min.js"></script>
	<!--<script type="text/javascript" src="skin/robotDDi/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="skin/robotDDi/js/bootstrap-paginator.js"></script>-->
	<script src="../assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<script src="../web/common/js/webuploader.min.js"></script>
	<script src="../web/common/js/customMethod.js"></script>
	<script src="../web/common/js/jquery.validate.js"></script>
	<script type="text/javascript" src="skin/robotDD/js/app.js"></script>
	<style>
		* {
			margin: 0;
			padding: 0;
		}
		.oSpan{
	        background: #FE6868;
	        color: #fff;
	        padding: 0px 4px 2px 4px;
	        height: 16px;
	        line-height: 16px;
	        font-size: 14px;
	        display: inline-block;
	        border-radius: 5px;
			font-family: "微软雅黑";
	    }
	    .oTitle{
			font-size: 14px;
			font-family: "微软雅黑";
			color: #6E6E6E;
			margin-bottom:2px;
		}
		.show{
			line-height: 25px;
		}
		.show span:last-child{
			font-size: 12px;
			font-family: "微软雅黑";
			color: #6e6e6e;
		}
		/* taskid=403 顾荣 任务:留言面板 样式开始 */
		.form-horizontal .form-group{
			margin-right: 0;
			margin-left: 0;
		}
		.modal{
			background: rgba(0,0,0,0.3);
		}
		@media (min-width: 768px){
			.modal-dialog{
				margin: 200px auto;
			}
		}
		#MessageBoardModal #ansText{
			height:160px;
		}
		#MessageBoardModal .modal-dialog{
			margin-top: 50px;
		}
		/* #MessageBoardModal .form-group i{
            font-size:18px;
        } */
		#MessageBoardModal .control-label>img{
			width:24px;
		}
		#filebtn{
			position: relative;
			border:1px solid lightgray;
			overflow: hidden;
			padding:0px;
		}
		#filebtn>.webuploader-pick{
			padding: 6px 12px
		}
		#filebtn input{
			position:absolute;
			opacity:0;
			right:0;
			top:0;
		}
		.imgdivs{
			text-align:center;
			padding:15px;
		}
		.imgdivs>div>img{
			width:73.5px;
			height:73.5px;
			border-radius:4px;
		}
		#successMessage .modal-body{
			text-align:center;
		}
		#successMessage .modal-body>div{
			margin:30px 0;
		}
		#successMessage .modal-footer{
			text-align: center;
			color:#2090b4
		}
		#successMessage .modal-footer span{
			cursor: pointer;
		}
		#MessageBoardForm .form-group>label{
			padding-right:0px
		}
		.imgdivs>div{
			position:relative
		}
		.delRound{
			width:20px;
			height:20px;
			font-weight:700;
			border-radius: 50%;
			background-color: red;
			color:white;
			position: absolute;
			right:-8px;
			top:-8px;
			transform:rotate(45deg);
			cursor:pointer;
		}
		/* taskid=403 顾荣 任务:留言面板 样式结束 */
	</style>
</head>
<body>
	<div id="backdrop"></div>
	<div class="container">
		<!-- 头部开始 -->
		<div class="header">
			<!-- 标题栏开始 -->
			<div class="robot_top">
				<!-- 标题栏logo开始 -->
				<ul class="robot_top_icon">
					<img id="weblogo" src="skin/robotDD/images/head94_98.png"/>
				</ul>
				<!-- 标题栏logo结束 -->
				<!-- 标题栏文案开始 -->
				<ul class="robot_top_name">
					<h4>智能客服</h4>
					<p>24小时竭诚为您服务~</p>
				</ul>
				<!-- 标题栏文案结束 -->
				<!-- 标题栏右侧开始 -->
				<ul class="robot_top_pic">
					<img id="ArtiServicePica" src="skin/robotDD/images/kefu_2.png"/>
				</ul>
				<!-- 标题栏右侧结束 -->
			</div>
			<!-- 标题栏结束 -->
		</div>
		<!-- 头部结束 -->
		<!-- 内容开始 -->
		<div class="content">
			<!-- 内容左侧开始 -->
			<div class="contentLeft">
				<div class="writeRoot">
					<div class="chatArea" id="chatContent">
					</div>
				</div>
				<div class="writeArea">
					<div class="writePanel">
						<div class="Panel_name" id="faceRoot" style="width:225px;">
							<span class="Panel_item" style="cursor:pointer;" title="表情">
								<div id="faceBtn" class="icon-bq_normal"></div>
							</span>
							<a class="Panel_item" href="javascript:void(0)" title="字号">
								<div id="font" class="icon-font_normal"></div>
							</a>
							<a class="Panel_item" href="javascript:void(0)" title="清空聊天记录" id="clearBtn">
								<div id="trash" class="icon-clear_normal"></div>
							</a>
							<a class="Panel_item" id="love" href="javascript:void(0)" title="满意度评价">
								<div class="icon-my_hover"></div>
								<div style="vertical-align: super;color:#295af3;">满意度评价</div>
							</a>
							<div class="popFont" style="display:none;">
								<div class="popFontS">
									<span>字号：</span>
									<select id="fonts">
										<option value="14px">9</option>
										<option value="15px">10</option>
										<option value="16px">11</option>
										<option value="17px">12</option>
										<option value="18px">13</option>
										<option value="19px">14</option>
										<option value="20px">15</option>
									</select>
								</div>
								<div class="popFontF">
									<span>字体：</span>
									<select id="fontf">
										<option value="Microsoft YaHei" style="font-family:'Microsoft YaHei'">微软雅黑</option>
										<option value="SimSun" style="font-family:'SimSun'">宋体</option>
										<option value="SimHei" style="font-family:'SimHei'">黑体</option>
										<option value="FangSong" style="font-family:'FangSong'">仿宋</option>
										<option value="KaiTi" style="font-family:'KaiTi'">楷体</option>
									</select>
								</div>
							</div>
						</div>
						<div class="Panel_word">
							<a class="Panel_item" href="javascript:void(0)" id="smallTip">
								<div id="skill" class="icon-tips_normal"></div>
							</a>
							<span class="popSpan">提问小技巧</span>
							<div class="popTips" style="display:none;">
								<div class="popTrans" style="position:absolute;width:400px;height:30px;bottom:-20px;left:0;"></div>
								<div class="popClose">&times;</div>
								<div class="popHead">
									<div class="lPic">
										<img src="skin/robotDD/images/tips1.png">
									</div>
									<div class="cPic">
										<img src="skin/robotDD/images/dang_tips.png">
									</div>
									<div class="cam" id="cam">
										<div class="tipMsg" id="tipMsg">
											<div class="tipMsgItem" name="tipMsgItem" orderT="1">
												<span>多个问题分别发送</span>
												<p>小当家一次只能回答一个问题哦，分开问才能准确哦。<br>
												比如这个问题“我的订单怎么还没收到？已经发货的订单可以取消吗？”，其实这里面包含“我的订单怎么还没收到？”和“已经发货的订单可以取消吗？”两个问题。</p>
											</div>
											<div class="tipMsgItem" name="tipMsgItem" orderT="2">
												<span>问题简洁明了</span>
												<p>发送您询问的主要关键字就可以了哦。<br>
												比如这个问题“我刚下了订单已付款，但要修改信息取消了订单，什么时候退款啊？”其实不用描述太多，直接问要点就可以了。</p>
											</div>
											<div class="tipMsgItem" name="tipMsgItem" orderT="3">
												<span>一个问题不要拆开发送</span>
												<p>只有将问题描述完整小当家才能给出完整解答哦。<br>
												比如这个问题“怎么办？”，如果改成“商品发错了怎么办？”，那么我马上就能回答您了！</p>
											</div>
											<div class="tipMsgItem" name="tipMsgItem" orderT="4">
												<span>推荐商品查询</span>
												<p>您直接输入【推荐，价格区间，商品】或者【搜索，价格区间，商品】，小当家可以直接为您推荐商品哦。<br>
												比如：推荐2000-3000的冰箱。</p>
											</div>
											<div class="tipMsgItem" name="tipMsgItem" orderT="5">
												<span>查询物流</span>
												<p>您直接输入【快递，快递名称，包裹号】，小当家可以直接为您查询最新物流信息哦。</p>
											</div>
										</div>
									</div>
								</div>
								<div class="popTail">
									<div class="tailMiddle">
										<div class="imgLeft">
											<div id="tipToLeft" class="icon-tips_left_normal"></div>
										</div>
										<div class="imgRight">
											<div id="tipToRight" class="icon-tips_right_normal"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="writeInput">
						<div style="display:none;" id="hdnWord"></div>
						<div style="display:none;" id="hdnTipWord" class="hdnTipWord"></div>
						<div style="display:none;"><div style="display:none;" id="hdnCommentTip"></div></div>
						<ul class="inputArea">
							<textarea maxlength="100" id="message"></textarea>
						</ul>
					</div>
					<dl class="inputSend" id="sendBtn">
						<dd>发送</dd>
					</dl>
					<dl class="inputClose" id="closeBtn">
						<dd>关闭</dd>
					</dl>
				</div>
			</div>
			<!-- 内容左侧结束 -->
			<!-- 内容右侧开始 -->
			<div class="contentRight">
				<div class="hotSpot">
					<div class="nav">
						<div class="navRow navRowOn" id="hotzero">
							最近订单
						</div>
						<div class="navRow" id="hotone">
							常见问题
						</div>
						<div class="navRow" id="hottwo">
							快捷通道
						</div>
						<div class="navRow" id="hotthree">
							个人空间
						</div>
						<div class="slider" id="slider">
							<img class="sliderImg" src="skin/robotDD/images/icon_to.png">
						</div>
					</div>
					<div class="robot_hot" id="showhotzero">
						<div style="text-align:center; margin-top: 200px;">
							<img src="skin/robotDD/images/no_orders.png">
						</div>
						<div class="null" style="color: #C4C4C4;">很抱歉，没有找到相关的订单信息</div>
					</div>
					<div class="robot_hot" style="display:none" id="showhotone">
						<div class="null">常见问题暂无内容</div>
					</div>
					<div class="robot_hot" style="display:none" id="showhottwo">
						<div class="null">快捷通道暂无内容</div>
					</div>
					<div class="robot_hot" style="display:none" id="showhotthree">
						<div id="hotThreeContent">
							<div class="moodDiv">
								<div class="weatherImg"></div>
								<div class="weatherDetail"></div>
								<div class="mood">
									<div class="moodPic icon-ico_clothes"></div>
									<div id="wearSug"></div>
								</div>
								<div class="mood">
									<div class="moodPic icon-normal"></div>
									心情：
									<div id="moodSpan">开心</div>
								</div>
							</div>
							<div class="row">
								<a href="javascript:;" id="telJoke">
									<div class="col">
										<div class="pic">
											<div class="icon-Dang_d1"></div>
										</div>
										<p>讲笑话</p>
									</div>
								</a>
								<a href="javascript:;" id="telStar">
									<div class="col">
										<div class="pic">
											<div class="icon-Dang_d2"></div>
										</div>
										<p>星座分析</p>
									</div>
								</a>
								<a href="javascript:;" id="tiaoxi">
									<div class="col">
										<div class="pic">
											<div class="icon-Dang_d3"></div>
										</div>
										<p>调戏小当家</p>
									</div>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- 内容右侧结束 -->
		</div>
		<!-- 内容结束 -->
		<!-- 底部开始 -->
		<div class="footer"></div>
		<!-- 底部结束 -->
	</div>
	<div class="fadeBackContent" style="display:none">
		<form class="feedbackForm" id="feedbackForm">
			<div class="feedback">
				<p>您对本服务是否满意？</p>
				<div>
					<input type="radio" name="level" checked value="1" id="rdoGood">
					满意
					<input type="radio" name="level" value="0" id="rdoBad">
					不满意
				</div>
			</div>
			<div id="hid" style="display:none">
				<p>您不满意的原因是？</p>
				<div>
					<input type="checkbox" name="reason[]" value="回答不准确" checked="">
					回答不准确
					<input type="checkbox" name="reason[]" value="答非所问">
					答非所问
					<input type="checkbox" name="reason[]" value="机器人骂人">
					机器人骂人
				</div>
			</div>
			<div class="comment">
				<textarea name="content" id="cont" maxlength="100" style="font-family: Microsoft Yahei;"></textarea>
			</div>
			<div class="send">
				<input type="button"  value="提交" id="fadeBackId" style="font-family: Microsoft Yahei;" />
			</div>
		</form>
	</div>
	<!-- taskId=402 修改人：顾荣  任务：留言功能-->
	<!-- 添加留言模态框和确定模态框 -->
	<!-- 留言模态框开始 -->
	<div class="modal" aria-hidden="true" id="MessageBoardModal" style="display:none;">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<button class="close" onclick="$('#MessageBoardModal').css('display','none');clearform()"><span aria-hidden="true">&times;</span></button>
					<h1>留言板</h1>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" id="MessageBoardForm">
						<div class="form-group">
							<label for="name" class="col-xs-2 control-label">
								<!-- <i class="fa fa-user-o" aria-hidden="true"></i> -->
								<img src="./css/icon/one/name.png" style="width:20px">
							</label>
							<div class="col-xs-9">
								<input type="text" class="form-control" placeholder="姓名" id="boardName" name="name">
							</div>
						</div>
						<div class="form-group">
							<label for="phone" class="col-xs-2 control-label">
								<!-- <i class="fa fa-phone" aria-hidden="true"></i> -->
								<img src="./css/icon/one/call.png">
							</label>
							<div class="col-xs-9">
								<input type="text" class="form-control" placeholder="手机号"  id="boardPhone" name="phone">
							</div>
						</div>
						<div class="form-group">
							<label for="QQ" class="col-xs-2 control-label">
								<!-- <i class="fa fa-qq" aria-hidden="true"></i> -->
								<img src="./css/icon/one/qq.png">
							</label>
							<div class="col-xs-9">
								<input type="text" class="form-control" placeholder="QQ"  id="boardQQ" name="QQ">
							</div>
						</div>
						<div class="form-group">
							<label for="email" class="col-xs-2 control-label">
								<!-- <i class="fa fa-envelope-o" aria-hidden="true"></i> -->
								<img src="./css/icon/one/email.png">
							</label>
							<div class="col-xs-9">
								<input type="text" class="form-control"  placeholder="邮箱"  id="boardEmail" name="email">
							</div>
						</div>
						<div class="form-group">
							<label for="ans_text" class="col-xs-2 control-label">
								<!-- <i class="fa fa-pencil" aria-hidden="true"></i> -->
								<img src="./css/icon/one/pen.png">
							</label>
							<div class="col-xs-9">
								<div id="MessageBoard">
									<textarea name="ans_text" class="form-control" id="ansText" placeholder="写点留言吧..."  maxlength="200"></textarea>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label class="col-xs-2 control-label">
							</label>
							<div class="col-xs-9" style="overflow:hidden">
								<div id="picCav">
									<!-- 添加图片 -->
								</div>
							</div>
						</div>
						<div class="form-group">
							<label class="col-xs-2 control-label">
							</label>
							<div class="col-xs-9" style="text-align:right" style="position:relative">
                                    <span id="filebtn" class="btn btn-white">
                                        上传图片
                                    </span>
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary pull-right" id="messageBoardBtn" onclick="$('#MessageBoardForm').submit()">提交</button>
				</div>
			</div>
		</div>
	</div>
	<!-- 留言模态框结束 -->
	<!-- 提交成功模态框开始 -->
	<div class="modal" aria-hidden="true" id="successMessage" style="display:none;">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body">
					<div>
						<i class="fa fa-check-circle-o" style="font-size:60px;color:lightblue;"></i>
					</div>
					<div>
						您的留言已经提交,我们会尽快处理!
					</div>
				</div>
				<div class="modal-footer">
					<div>
						<span id="messageAgain" style="margin-right:1.5rem;">继续留言>></span>
						<span id="backMessage">返回聊天页>></span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- 提交成功模态框结束 -->
</body>
<script>
	// taskid=403 顾荣 任务:留言面板 2012.12.22开始部分
	//点击继续留言
	$("#messageAgain").click(function(){
		clearform()
		$("#successMessage").css("display","none");//关闭确定框
		//清空图片预览区域
	})
	//点击返回聊天页
	$("#backMessage").click(function(){
		clearform()
		$("#successMessage").css("display","none")
		$("#MessageBoardModal").css("display","none")
	})
	var validator1=$('#MessageBoardForm').validate({
		rules:{
			name:{
				minlength:2,
				maxlength:10,
			},
			phone:{
				telFlag:true
			},
			QQ:{
				number:true,
				minlength:5,
				maxlength:12
			},
			email:{
				emailFlag:true,
			},
			ans_text:{
				required:true,
			}
		},
		messages:{
			name:{
				minlength:"请输入2~10个字符！",
				maxlength:"请输入2~10个字符！"
			},
			QQ:{
				number:"请输入正确的QQ号码！",
				minlength:"请输入正确的QQ号码！",
				maxlength:"请输入正确的QQ号码！"
			},
			ans_text:{
				required:"留言不能为空！",
			}
		},
		submitHandler: msgSubmit
	});
	$.validator.addMethod("emailFlag",function(value,element,params){
		var emailreg=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)$/
		if(emailreg.test(value.trim())||value.trim()==""){
			return true;
		}else{
			return false;
		}
	},"请输入正确格式的邮箱！");
	/**
	 * taskId=494;顾荣 2017.12.27
	 * 修改：优化手机号码正则
	 */
	$.validator.addMethod("telFlag",function(value,element,params){
		var telNumReg=/^1[0-9]{10}$/
		if(telNumReg.test(value.trim())||value.trim()==""){
			return true;
		}else{
			return false;
		}
	},"请输入正确格式的手机号码！");
	function msgSubmit(){
		var messageName=$("#boardName").val().trim()//姓名
		var messagePhone=$("#boardPhone").val().trim()//电话号码
		var messageQQ=$("#boardQQ").val().trim()//QQ号码
		var messageEmail=$("#boardEmail").val().trim()//电子邮箱
		var messageTxt=$("#ansText").val().trim()//留言内容
		var imgs=[];//图片标签数组

		for(var i=0;i<$(".imgdivs").size();i++){
			if($(".imgdivs").eq(i).attr('rel')){
				imgs.push($(".imgdivs").eq(i).attr('rel'))
			}
		}
		imgs=imgs.join(",")
		var urlEles=window.location.href.split("?")[1].split("&");
		var sysNum='';//获取当前网址的sysNum值
		for(var i=0;i<urlEles.length;i++){
			if(urlEles[i].indexOf("sysNum")>-1){
				sysNum=urlEles[i].split("=")[1]
			}
		}
		$.ajax({
			type:'post',
			datatype:'json',
			cache:false,//不从缓存中去数据,
			url:encodeURI('../../servlet/AQ'),
			data:{
				s: 'leavemsg',
				sourceId:0,
				sysNum:sysNum,
				entrance:document.referrer,
				name:messageName,
				telNum:messagePhone,
				qq:messageQQ,
				email:messageEmail,
				content:messageTxt,
				imgUrls:imgs
			},
			success:function(data){
				if(data.status==0){
					$("#successMessage").css("display","block")
				}else{
					layer.msg(data.message)
				}
			}
		})
	}
	// 清空表单内容
	function clearform(){
		validator1.resetForm()
		$('.text-error').removeClass("text-error helper-font-small")
		$("#boardName").val("")
		$("#boardPhone").val("")
		$("#boardQQ").val("")
		$("#boardEmail").val("")
		$("#ansText").val("")
		$("#picCav").html("")
	}
</script>
</html>
