<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta charset="utf-8" />
	<title>客户名片列表</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />

	<!-- ================== BEGIN BASE CSS STYLE ================== -->
	<link href="../../assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
	<link href="../../assets/css/animate.min.css" rel="stylesheet" />
	<link href="../../assets/css/style.min.css" rel="stylesheet" />
	<link href="../../assets/css/style-responsive.min.css" rel="stylesheet" />
	<link href="../../assets/css/theme/default.css" rel="stylesheet" id="theme" />
	<link href="../../assets/plugins/jquery-ui/themes/base/minified/jquery-ui.min.css" rel="stylesheet" />
	<link href="../../assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
	<link href="../../assets/plugins/gritter/css/jquery.gritter.css" rel="stylesheet" />
	<!-- ================== END BASE CSS STYLE ================== -->

	<link href="../common/css/radioskin/blue.css" rel="stylesheet">
	<link href="../common/css/commonCSS.css" rel="stylesheet">
</head>

<body class="pace-done">
	<div class="fade in hide" id="page-loader"><span class="spinner"></span></div>
	<div id="page-container" class="fade in">
		<div id="content" class="content">
			<ol class="breadcrumb pull-right">
				
			</ol>
			<div class="row">
				<h1 class="page-header">客户名片列表</h1>
				<div class="panel">
					<div class="panel-body">
						<form id="searchName" method="post">
							<a data-toggle="modal" class="btn btn-primary" href="#addModal">
								<i class="glyphicon glyphicon-plus"></i>
								<span>添加客户名片</span>
							</a>
							<div class="input-group pull-right" style="width: 280px;">
								<input id="ABC" name="name" type="text" class="form-control">
								<input type="text" class="hide">
								<div class="input-group-btn">
									<button type="button" class="chooseWay btn btn-primary dropdown-toggle" data-toggle="dropdown">姓名</button>
									<button id="searchNameBtn" onclick="listCardPage()" style="border-top-left-radius: 3px;border-bottom-left-radius: 3px;margin-left: 4px" type="button" class="btn btn-primary"><i class="glyphicon glyphicon-search"></i></button>
								</div>
							</div>
						</form>
						<table class="table" id="cardList">
							<thead>
								<tr>
									<th>姓名</th>
									<th>性别</th>
									<th>QQ</th>
									<th>邮箱 </th>
									<th>微信账号</th>
									<th>手机号</th>
									<th width="60">操作</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
						<div id="pageList"></div>
					</div>
				</div>
			</div>
			<div class="modal fade" style="display: none;" aria-hidden="true" id="addModal">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
							<h4 class="modal-title">添加客户名片</h4>
						</div>
						<div class="modal-body">
							<form method="POST" id="addCard_form" class="form-horizontal">
								<fieldset>
									<div class="form-group">
										<label class="col-md-3 control-label">姓名 <span class="red"> *</span></label>
										<div class="col-md-7">
											<input type="text" placeholder="请输入姓名" class="form-control" name="name">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">性别 <span class="red"> *</span></label>
										<div class="col-md-7">
											<label class="radio-inline">
												<input type="radio" checked="" value="1" name="sex">
												男
											</label>
											<label class="radio-inline">
												<input type="radio" value="2" name="sex">
												女
											</label>
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">QQ <span class="red"> *</span></label>
										<div class="col-md-7">
											<input type="text" placeholder="请输入QQ" class="form-control" name="qq">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">邮箱 <span class="red"> *</span></label>
										<div class="col-md-7">
											<input type="email" placeholder="请输入邮箱" class="form-control" name="email">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">手机 <span class="red"> *</span></label>
										<div class="col-md-7">
											<input type="tel" placeholder="请输入手机" class="form-control" name="telNum">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">欢迎语</label>
										<div class="col-md-7">
											<textarea name="welcome" class="" id="welcome"></textarea>
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">备注</label>
										<div class="col-md-7">
											<input type="text" placeholder="请输入备注" class="form-control" name="info">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">地址</label>
										<div class="col-md-7">
											<input type="text" placeholder="请输入地址" class="form-control" name="addr">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">部门</label>
										<div class="col-md-7">
											<input type="text" placeholder="请输入部门" class="form-control" name="dep">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">职位</label>
										<div class="col-md-7">
											<input type="text" placeholder="请输入职位" class="form-control" name="job">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">账号 <span class="red"> *</span></label>
										<div class="col-md-7">
											<input type="text" placeholder="请输入账号" class="form-control" name="userName">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label">微信账号</label>
										<div class="col-md-7">
											<input type="text" placeholder="请输入微信账号" class="form-control" name="wxName">
										</div>
									</div>
								</fieldset>
							</form>
						</div>
						<div class="modal-footer">
							<button type="submit" class="btn btn-sm btn-primary" href="javascript:;" onclick="$('#addCard_form').submit()">添加</button>
							<a data-dismiss="modal" class="btn btn-sm btn-white" href="javascript:;">取消</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<a data-click="scroll-top" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" href="javascript:;"><i class="fa fa-angle-up"></i></a>
	</div>
    <!-- ================== BEGIN BASE JS ================== -->
	<script src="../../assets/plugins/jquery/jquery-1.9.1.min.js"></script>
	<script src="../../assets/plugins/jquery/jquery-migrate-1.1.0.min.js"></script>
	<script src="../../assets/plugins/jquery-ui/ui/minified/jquery-ui.min.js"></script>
	<script src="../../assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<script src="../../assets/plugins/slimscroll/jquery.slimscroll.min.js"></script>
	<script src="../../assets/plugins/gritter/js/jquery.gritter.js"></script>
	<script src="../../assets/js/apps.min.js"></script>
	<!--[if lt IE 9]>
		<script src="assets/crossbrowserjs/html5shiv.js"></script>
		<script src="assets/crossbrowserjs/respond.min.js"></script>
		<script src="assets/crossbrowserjs/excanvas.min.js"></script>
	<![endif]-->
	<!-- ================== END BASE JS ================== -->

	<script src="../common/js/bootstrap-paginator.js"></script>
	<script src="../common/js/jquery.validate.js"></script>
	<script src="../common/js/jquery.validate.custom.js"></script>
	<script src="../common/js/icheck.js"></script>
	<script src="../common/js/customMethod.js"></script>
	<!--编辑器-->
	<script type="text/javascript" src="../common/js/ueditor/ueditor.config.js"></script>
	<script type="text/javascript" src="../common/js/ueditor/ueditor.all.js"> </script>
	<script type="text/javascript" src="../common/js/ueditor/lang/zh-cn/zh-cn.js"></script>
	<script src="js/staff.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			App.init();
			$(document).on('keyup', function(e) {
			var $activeEl = $(document.activeElement);
			if($activeEl.is('#ABC')&& (e.keyCode==13||e.keyCode==108)){
				$('#searchNameBtn').trigger('click');
			}
		});			//生成列表
			listCardPage(1);
			UE.getEditor('welcome', {
				toolbars: [
					['source', 'undo', 'redo', 'bold', 'italic', 'underline', 'fontborder', 'strikethrough', 'superscript', 'subscript', 'removeformat', 'formatmatch']
				],
				initialFrameHeight: 120
			});
			//添加新增用户表单验证
			/*
				taskId=485,黄世鹏
				修改：添加正则：姓名不能有数字和符号标点，邮箱不能有数字
			*/
			$.validator.addMethod("checkName",function(value,element){
				var reg=/^[\u4e00-\u9fa5_a-zA-Z]{2,10}$/
				if(reg.test(value.trim()) ){
					return true;
				}else{
					return false;
				}
			},"请输入2到10位汉字或字母");
			$.validator.addMethod("emailCheck",function(value,element){
				var emailreg=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)$/;
				if(emailreg.test(value.trim())){
					return true;
				}else{
					return false;
				}
			},"请输入一个有效的邮箱地址！");
			$('#addCard_form').validate({
				rules:{
					name:{
						required:true,
						checkName:true
					},
					sex:{
						required:true
					},
					qq:{
						required:true,
						number:true,
						minlength:5
					},
					email:{
						required:true,
						email:true,
						emailCheck:true
					},
					telNum:{
						required:true,
					    minlength : 11,
					    isMobile : true
					},
					welcome:{
						maxlength:300,
						minlength:20
					},
					userName:{
						required:true,
						number:true
					}
				},
				messages:{
					name:{
						required:'请输入您的真实性名！'
					},
					sex:{
						required:'请选择性别！'
					},
					qq:{
						required:'请输入您的QQ号！',
						number:'请输入一个有效的QQ！',
						minlength:'qq不能少于5个字符！'
					},
					email:{
						required:'请输入一个您的的邮箱地址！',
						email:'请输入一个有效的邮箱地址！'
					},
					telNum:{
                        required: '请输入手机号码！',
                        minlength : "确认手机号码不能小于11个字符",
                        isMobile : "请正确填写您的手机号码"
                    },
					welcome:{
						maxlength:'请输入不多于300个字符！',
						minlength:'请输入不少于20个字符！'
					},
					userName:{
						required:'请输入您的账号！',
						number:'请输入数字！'
					}
				},
				submitHandler: addCard
			});
			//清空表单
			$('#addModal').on('hidden.bs.modal', function () {
				$('#addCard_form')[0].reset();
				UE.getEditor('welcome').setContent('');
			})
		});
	</script>
</body>
</html>
